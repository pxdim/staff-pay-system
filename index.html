<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkForce Pro - 智慧工讀生管理平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <style>
        * { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-sizing: border-box;
        }
        
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }
        
        .card-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        }
        
        .tab-active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }
        
        .animate-in { 
            animation: slideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes pulse {
            0%, 100% { 
                opacity: 1;
                transform: scale(1);
            }
            50% { 
                opacity: 0.8;
                transform: scale(0.98);
            }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.1); }
        }
        
        .notification-badge {
            animation: bounce 2s infinite;
        }
        
        @keyframes scan {
            0% { transform: translateY(0); }
            100% { transform: translateY(200px); }
        }
        
        .qr-scan-line {
            position: absolute;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, #667eea, transparent);
            animation: scan 2s linear infinite;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.5s ease-out;
        }
        
        .stat-card {
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
        }
        
        .stat-card:hover::before {
            animation: shimmer 0.5s;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .typing-dots span {
            animation: typing 1.4s infinite;
            opacity: 0;
        }
        
        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0; }
            30% { opacity: 1; }
        }
        
        .success-checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: block;
            stroke-width: 2;
            stroke: #10b981;
            stroke-miterlimit: 10;
            box-shadow: inset 0px 0px 0px #10b981;
            animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
            margin: 0 auto;
        }
        
        .success-checkmark__circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke-miterlimit: 10;
            stroke: #10b981;
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }
        
        .success-checkmark__check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
        }
        
        @keyframes stroke {
            100% { stroke-dashoffset: 0; }
        }
        
        @keyframes scale {
            0%, 100% { transform: none; }
            50% { transform: scale3d(1.1, 1.1, 1); }
        }
        
        @keyframes fill {
            100% { box-shadow: inset 0px 0px 0px 30px #10b981; }
        }
        
        /* 自定義滾動條 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="min-h-screen">
        <!-- 載入動畫 -->
        <div id="loadingScreen" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
            <div class="text-center">
                <div class="loader mx-auto mb-4"></div>
                <p class="text-gray-600">系統載入中...</p>
            </div>
        </div>

        <!-- 登入頁面 -->
        <div id="loginPage" class="gradient-bg min-h-screen flex items-center justify-center p-4 hidden">
            <div class="glass rounded-2xl p-8 w-full max-w-md animate-in">
                <div class="text-center mb-8">
                    <div class="w-24 h-24 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full mx-auto mb-4 flex items-center justify-center shadow-2xl">
                        <i class="fas fa-users-gear text-white text-4xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800">WorkForce Pro</h1>
                    <p class="text-gray-600 mt-2">智慧工讀生管理平台</p>
                    <div class="flex justify-center space-x-2 mt-3">
                        <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs">多租戶架構</span>
                        <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs">即時監控</span>
                        <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">智慧排班</span>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">選擇公司</label>
                        <select id="companySelect" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none">
                            <option value="company1">創意行銷公關公司</option>
                            <option value="company2">品牌活動策劃有限公司</option>
                            <option value="company3">數位媒體整合行銷</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">電子郵件</label>
                        <input type="email" id="emailInput" placeholder="admin@company.com" 
                               class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">密碼</label>
                        <div class="relative">
                            <input type="password" id="passwordInput" placeholder="••••••••" 
                                   class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none">
                            <button onclick="togglePassword()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2">
                            <span class="text-sm text-gray-600">記住我</span>
                        </label>
                        <a href="#" class="text-sm text-purple-600 hover:text-purple-800">忘記密碼？</a>
                    </div>
                    <button onclick="performLogin()" class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105">
                        <i class="fas fa-sign-in-alt mr-2"></i>登入系統
                    </button>
                </div>
                
                <div class="mt-6 pt-6 border-t border-gray-200">
                    <p class="text-center text-sm text-gray-600 mb-3">快速體驗</p>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="quickLogin('admin')" class="bg-white border border-purple-300 text-purple-600 py-2 rounded-lg hover:bg-purple-50">
                            <i class="fas fa-user-tie mr-1"></i>管理員
                        </button>
                        <button onclick="quickLogin('worker')" class="bg-white border border-blue-300 text-blue-600 py-2 rounded-lg hover:bg-blue-50">
                            <i class="fas fa-user mr-1"></i>工讀生
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 管理員儀表板 -->
        <div id="adminDashboard" class="hidden">
            <!-- 導航列 -->
            <nav class="bg-white shadow-sm border-b sticky top-0 z-40">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between h-16">
                        <div class="flex items-center">
                            <div class="flex items-center space-x-8">
                                <div class="flex items-center cursor-pointer" onclick="showDashboard()">
                                    <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md">
                                        <i class="fas fa-layer-group text-white"></i>
                                    </div>
                                    <span class="ml-3 text-xl font-bold text-gray-800">WorkForce Pro</span>
                                </div>
                                <div class="hidden md:flex space-x-1">
                                    <button onclick="setAdminTab('overview')" class="admin-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50 tab-active">
                                        <i class="fas fa-chart-line mr-2"></i>總覽
                                    </button>
                                    <button onclick="setAdminTab('events')" class="admin-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-calendar-alt mr-2"></i>活動管理
                                    </button>
                                    <button onclick="setAdminTab('workers')" class="admin-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-users mr-2"></i>工讀生
                                    </button>
                                    <button onclick="setAdminTab('checkin')" class="admin-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-clipboard-check mr-2"></i>簽到管理
                                    </button>
                                    <button onclick="setAdminTab('salary')" class="admin-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-dollar-sign mr-2"></i>薪資結算
                                    </button>
                                    <button onclick="setAdminTab('analytics')" class="admin-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-chart-pie mr-2"></i>數據分析
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button onclick="toggleSearch()" class="text-gray-600 hover:text-purple-600">
                                <i class="fas fa-search"></i>
                            </button>
                            <div class="relative">
                                <button onclick="toggleNotifications()" class="text-gray-600 hover:text-purple-600">
                                    <i class="fas fa-bell"></i>
                                    <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full notification-badge"></span>
                                </button>
                                <div id="notificationDropdown" class="hidden absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl">
                                    <div class="p-4 border-b">
                                        <h3 class="font-semibold">通知中心</h3>
                                    </div>
                                    <div class="max-h-96 overflow-y-auto">
                                        <div class="p-4 hover:bg-gray-50 border-b">
                                            <div class="flex items-start">
                                                <div class="w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></div>
                                                <div class="flex-1">
                                                    <p class="text-sm font-medium">新工讀生註冊</p>
                                                    <p class="text-xs text-gray-500">陳小美申請加入團隊</p>
                                                    <p class="text-xs text-gray-400 mt-1">5分鐘前</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="p-4 hover:bg-gray-50">
                                            <div class="flex items-start">
                                                <div class="w-2 h-2 bg-green-500 rounded-full mt-2 mr-3"></div>
                                                <div class="flex-1">
                                                    <p class="text-sm font-medium">活動簽到完成</p>
                                                    <p class="text-xs text-gray-500">科技論壇已有45人完成簽到</p>
                                                    <p class="text-xs text-gray-400 mt-1">1小時前</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3 pl-4 border-l">
                                <div class="text-right hidden sm:block">
                                    <p class="text-sm font-medium text-gray-700">王經理</p>
                                    <p class="text-xs text-gray-500">系統管理員</p>
                                </div>
                                <div class="relative">
                                    <button onclick="toggleUserMenu()" class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                        <span class="text-sm font-semibold text-purple-600">王</span>
                                    </button>
                                    <div id="userMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl">
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">
                                            <i class="fas fa-user mr-2"></i>個人資料
                                        </a>
                                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">
                                            <i class="fas fa-cog mr-2"></i>系統設定
                                        </a>
                                        <hr class="my-2">
                                        <button onclick="logout()" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50">
                                            <i class="fas fa-sign-out-alt mr-2"></i>登出
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- 總覽頁面 -->
            <div id="overviewTab" class="admin-content p-6">
                <div class="max-w-7xl mx-auto">
                    <!-- 頁面標題 -->
                    <div class="mb-6 fade-in-up">
                        <h2 class="text-3xl font-bold text-gray-800">儀表板總覽</h2>
                        <p class="text-gray-600 mt-1">即時監控所有活動與工讀生狀態</p>
                    </div>
                    
                    <!-- 統計卡片 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl p-6 card-hover cursor-pointer stat-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">本月活動</p>
                                    <p class="text-3xl font-bold text-gray-800 mt-2">
                                        <span class="counter" data-target="12">0</span>
                                    </p>
                                    <p class="text-green-600 text-sm mt-2 flex items-center">
                                        <i class="fas fa-arrow-up mr-1"></i>20% 較上月
                                    </p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-r from-purple-400 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
                                    <i class="fas fa-calendar text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">進行中</span>
                                    <span class="font-medium">3 場</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6 card-hover cursor-pointer stat-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">活躍工讀生</p>
                                    <p class="text-3xl font-bold text-gray-800 mt-2">
                                        <span class="counter" data-target="248">0</span>
                                    </p>
                                    <p class="text-green-600 text-sm mt-2 flex items-center">
                                        <i class="fas fa-arrow-up mr-1"></i>15% 較上月
                                    </p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-r from-blue-400 to-blue-600 rounded-xl flex items-center justify-center shadow-lg">
                                    <i class="fas fa-users text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">新加入</span>
                                    <span class="font-medium">28 人</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6 card-hover cursor-pointer stat-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">今日簽到</p>
                                    <p class="text-3xl font-bold text-gray-800 mt-2">
                                        <span class="counter" data-target="89">0</span>
                                    </p>
                                    <p class="text-blue-600 text-sm mt-2 flex items-center">
                                        <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mr-2 animate-pulse"></span>
                                        進行中
                                    </p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-r from-green-400 to-green-600 rounded-xl flex items-center justify-center shadow-lg">
                                    <i class="fas fa-check-circle text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">準時率</span>
                                    <span class="font-medium">96%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6 card-hover cursor-pointer stat-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">待結薪資</p>
                                    <p class="text-3xl font-bold text-gray-800 mt-2">
                                        $<span class="counter" data-target="48500">0</span>
                                    </p>
                                    <p class="text-orange-600 text-sm mt-2 flex items-center">
                                        <i class="fas fa-exclamation-circle mr-1"></i>3 筆待確認
                                    </p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-r from-orange-400 to-orange-600 rounded-xl flex items-center justify-center shadow-lg">
                                    <i class="fas fa-dollar-sign text-white text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500">本月已付</span>
                                    <span class="font-medium">$125,600</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                        <!-- 即時活動狀態 -->
                        <div class="lg:col-span-2 bg-white rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">今日活動</h3>
                                <button class="text-purple-600 hover:text-purple-800 text-sm">
                                    查看全部 <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                            <div class="space-y-3">
                                <div class="p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border-l-4 border-purple-500">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="flex items-center space-x-3">
                                                <h4 class="font-semibold text-gray-800">2025 科技論壇</h4>
                                                <span class="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs">
                                                    <i class="fas fa-circle text-green-500 text-xs mr-1"></i>進行中
                                                </span>
                                            </div>
                                            <p class="text-sm text-gray-600 mt-1">
                                                <i class="fas fa-map-marker-alt mr-1"></i>台北國際會議中心
                                                <span class="mx-2">•</span>
                                                <i class="fas fa-clock mr-1"></i>09:00-18:00
                                            </p>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-2xl font-bold text-purple-600">45/50</p>
                                            <p class="text-xs text-gray-500">工讀生</p>
                                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                                <div class="bg-purple-600 h-2 rounded-full" style="width: 90%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border-l-4 border-blue-500">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <div class="flex items-center space-x-3">
                                                <h4 class="font-semibold text-gray-800">品牌發表會</h4>
                                                <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full text-xs">
                                                    <i class="fas fa-circle text-yellow-500 text-xs mr-1"></i>準備中
                                                </span>
                                            </div>
                                            <p class="text-sm text-gray-600 mt-1">
                                                <i class="fas fa-map-marker-alt mr-1"></i>信義區新光三越
                                                <span class="mx-2">•</span>
                                                <i class="fas fa-clock mr-1"></i>14:00-20:00
                                            </p>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-2xl font-bold text-blue-600">28/30</p>
                                            <p class="text-xs text-gray-500">工讀生</p>
                                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                                <div class="bg-blue-600 h-2 rounded-full" style="width: 93%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 快速操作 -->
                        <div class="bg-white rounded-xl p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">快速操作</h3>
                            <div class="space-y-3">
                                <button onclick="showCreateEvent()" class="w-full text-left p-3 rounded-lg border hover:bg-purple-50 hover:border-purple-300 transition">
                                    <i class="fas fa-plus-circle text-purple-600 mr-2"></i>
                                    <span class="text-gray-700">建立新活動</span>
                                </button>
                                <button onclick="showAddWorker()" class="w-full text-left p-3 rounded-lg border hover:bg-blue-50 hover:border-blue-300 transition">
                                    <i class="fas fa-user-plus text-blue-600 mr-2"></i>
                                    <span class="text-gray-700">新增工讀生</span>
                                </button>
                                <button onclick="setAdminTab('checkin')" class="w-full text-left p-3 rounded-lg border hover:bg-green-50 hover:border-green-300 transition">
                                    <i class="fas fa-qrcode text-green-600 mr-2"></i>
                                    <span class="text-gray-700">產生 QR Code</span>
                                </button>
                                <button onclick="exportReport()" class="w-full text-left p-3 rounded-lg border hover:bg-orange-50 hover:border-orange-300 transition">
                                    <i class="fas fa-download text-orange-600 mr-2"></i>
                                    <span class="text-gray-700">匯出報表</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 圖表區域 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">本週簽到趨勢</h3>
                            <canvas id="weeklyChart"></canvas>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">打卡方式分析</h3>
                            <canvas id="methodChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 活動管理頁面 -->
            <div id="eventsTab" class="admin-content hidden p-6">
                <div class="max-w-7xl mx-auto">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <div>
                            <h2 class="text-3xl font-bold text-gray-800">活動管理</h2>
                            <p class="text-gray-600 mt-1">管理所有活動與人員配置</p>
                        </div>
                        <button onclick="showCreateEvent()" class="mt-4 sm:mt-0 bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-3 rounded-lg hover:shadow-lg flex items-center">
                            <i class="fas fa-plus-circle mr-2"></i>建立活動
                        </button>
                    </div>
                    
                    <!-- 篩選器 -->
                    <div class="bg-white rounded-xl shadow-sm p-4 mb-6">
                        <div class="flex flex-col sm:flex-row gap-4">
                            <div class="flex-1">
                                <div class="relative">
                                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                    <input type="text" placeholder="搜尋活動名稱..." 
                                           class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500">
                                </div>
                            </div>
                            <select class="px-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500">
                                <option>全部狀態</option>
                                <option>籌備中</option>
                                <option>進行中</option>
                                <option>已結束</option>
                            </select>
                            <input type="date" class="px-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500">
                            <button class="px-6 py-2 bg-purple-100 text-purple-600 rounded-lg hover:bg-purple-200">
                                <i class="fas fa-filter mr-2"></i>篩選
                            </button>
                        </div>
                    </div>
                    
                    <!-- 活動列表 -->
                    <div class="bg-white rounded-xl shadow-sm overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">活動資訊</th>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">時間地點</th>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">人員配置</th>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">狀態</th>
                                        <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50 cursor-pointer" onclick="showEventDetail()">
                                        <td class="px-6 py-4">
                                            <div class="flex items-center">
                                                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                                                    <i class="fas fa-microphone text-purple-600"></i>
                                                </div>
                                                <div>
                                                    <div class="text-sm font-medium text-gray-900">2025 科技論壇</div>
                                                    <div class="text-sm text-gray-500">活動編號: EV2025001</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="text-sm text-gray-900">2025/01/15</div>
                                            <div class="text-sm text-gray-500">09:00 - 18:00</div>
                                            <div class="text-sm text-gray-500">台北國際會議中心</div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="flex items-center">
                                                <div class="text-center mr-4">
                                                    <div class="text-2xl font-bold text-purple-600">45</div>
                                                    <div class="text-xs text-gray-500">已確認</div>
                                                </div>
                                                <div class="text-gray-400">/</div>
                                                <div class="text-center ml-4">
                                                    <div class="text-2xl font-bold text-gray-400">50</div>
                                                    <div class="text-xs text-gray-500">需求</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <span class="px-3 py-1 text-xs rounded-full bg-green-100 text-green-800 flex items-center inline-flex">
                                                <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                                                進行中
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 text-sm">
                                            <div class="flex space-x-2">
                                                <button onclick="event.stopPropagation(); showEventQR()" 
                                                        class="text-blue-600 hover:text-blue-900 p-2 hover:bg-blue-50 rounded" title="QR Code">
                                                    <i class="fas fa-qrcode"></i>
                                                </button>
                                                <button onclick="event.stopPropagation(); editEvent()" 
                                                        class="text-purple-600 hover:text-purple-900 p-2 hover:bg-purple-50 rounded" title="編輯">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button onclick="event.stopPropagation(); duplicateEvent()" 
                                                        class="text-green-600 hover:text-green-900 p-2 hover:bg-green-50 rounded" title="複製">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 cursor-pointer">
                                        <td class="px-6 py-4">
                                            <div class="flex items-center">
                                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                                                    <i class="fas fa-shopping-bag text-blue-600"></i>
                                                </div>
                                                <div>
                                                    <div class="text-sm font-medium text-gray-900">品牌發表會</div>
                                                    <div class="text-sm text-gray-500">活動編號: EV2025002</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="text-sm text-gray-900">2025/01/15</div>
                                            <div class="text-sm text-gray-500">14:00 - 20:00</div>
                                            <div class="text-sm text-gray-500">信義區新光三越</div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <div class="flex items-center">
                                                <div class="text-center mr-4">
                                                    <div class="text-2xl font-bold text-blue-600">28</div>
                                                    <div class="text-xs text-gray-500">已確認</div>
                                                </div>
                                                <div class="text-gray-400">/</div>
                                                <div class="text-center ml-4">
                                                    <div class="text-2xl font-bold text-gray-400">30</div>
                                                    <div class="text-xs text-gray-500">需求</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4">
                                            <span class="px-3 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 flex items-center inline-flex">
                                                <span class="w-2 h-2 bg-yellow-500 rounded-full mr-2"></span>
                                                準備中
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 text-sm">
                                            <div class="flex space-x-2">
                                                <button onclick="event.stopPropagation(); showEventQR()" 
                                                        class="text-blue-600 hover:text-blue-900 p-2 hover:bg-blue-50 rounded">
                                                    <i class="fas fa-qrcode"></i>
                                                </button>
                                                <button onclick="event.stopPropagation(); editEvent()" 
                                                        class="text-purple-600 hover:text-purple-900 p-2 hover:bg-purple-50 rounded">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button onclick="event.stopPropagation(); duplicateEvent()" 
                                                        class="text-green-600 hover:text-green-900 p-2 hover:bg-green-50 rounded">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 簽到管理頁面 -->
            <div id="checkinTab" class="admin-content hidden p-6">
                <div class="max-w-7xl mx-auto">
                    <div class="mb-6">
                        <h2 class="text-3xl font-bold text-gray-800">簽到管理</h2>
                        <p class="text-gray-600 mt-1">即時監控活動簽到狀況</p>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- QR Code 顯示區 -->
                        <div class="bg-white rounded-xl p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">活動 QR Code</h3>
                            <div class="relative bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-8 mb-4">
                                <div id="qrCodeDisplay" class="flex justify-center"></div>
                                <div class="qr-scan-line"></div>
                            </div>
                            <div class="text-center mb-4">
                                <p class="font-medium text-gray-800">2025 科技論壇</p>
                                <p class="text-sm text-gray-500 mt-1">
                                    <i class="fas fa-sync-alt mr-1"></i>
                                    自動更新：<span id="qrCountdown">30</span>秒
                                </p>
                            </div>
                            <div class="space-y-2">
                                <button onclick="downloadQR()" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">
                                    <i class="fas fa-download mr-2"></i>下載 QR Code
                                </button>
                                <button onclick="shareQR()" class="w-full bg-white border border-purple-300 text-purple-600 py-2 rounded-lg hover:bg-purple-50">
                                    <i class="fas fa-share-alt mr-2"></i>分享連結
                                </button>
                            </div>
                        </div>
                        
                        <!-- 即時簽到記錄 -->
                        <div class="lg:col-span-2 bg-white rounded-xl p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">即時簽到記錄</h3>
                                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm flex items-center">
                                    <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                                    即時更新
                                </span>
                            </div>
                            
                            <div id="checkInList" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- 動態載入簽到記錄 -->
                            </div>
                            
                            <!-- 打卡方式統計 -->
                            <div class="mt-6 pt-6 border-t">
                                <p class="text-sm font-medium text-gray-700 mb-4">打卡方式統計</p>
                                <div class="grid grid-cols-3 gap-4">
                                    <div class="text-center p-4 bg-purple-50 rounded-lg">
                                        <i class="fas fa-qrcode text-purple-600 text-2xl mb-2"></i>
                                        <div class="text-2xl font-bold text-purple-600">32</div>
                                        <div class="text-xs text-gray-500">QR Code</div>
                                    </div>
                                    <div class="text-center p-4 bg-blue-50 rounded-lg">
                                        <i class="fas fa-map-marker-alt text-blue-600 text-2xl mb-2"></i>
                                        <div class="text-2xl font-bold text-blue-600">28</div>
                                        <div class="text-xs text-gray-500">GPS 定位</div>
                                    </div>
                                    <div class="text-center p-4 bg-green-50 rounded-lg">
                                        <i class="fas fa-camera text-green-600 text-2xl mb-2"></i>
                                        <div class="text-2xl font-bold text-green-600">15</div>
                                        <div class="text-xs text-gray-500">人臉辨識</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 異常打卡警報 -->
                    <div class="mt-6 bg-red-50 border border-red-200 rounded-xl p-4">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-red-600 mr-3 mt-1"></i>
                            <div class="flex-1">
                                <h4 class="font-semibold text-red-800">異常打卡偵測</h4>
                                <p class="text-sm text-red-600 mt-1">發現 2 筆可疑打卡記錄，請確認</p>
                                <button class="text-sm text-red-700 underline mt-2">查看詳情</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 薪資結算頁面 -->
            <div id="salaryTab" class="admin-content hidden p-6">
                <div class="max-w-7xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-3xl font-bold text-gray-800">薪資結算</h2>
                            <p class="text-gray-600 mt-1">管理工讀生薪資與付款</p>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="calculateSalary()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-3 rounded-lg hover:shadow-lg">
                                <i class="fas fa-calculator mr-2"></i>計算薪資
                            </button>
                            <button onclick="exportSalary()" class="bg-white border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50">
                                <i class="fas fa-file-excel mr-2"></i>匯出報表
                            </button>
                        </div>
                    </div>
                    
                    <!-- 薪資摘要 -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white rounded-lg p-4 border-l-4 border-green-500">
                            <p class="text-sm text-gray-600">本月應付總額</p>
                            <p class="text-2xl font-bold text-gray-800 mt-1">$186,400</p>
                        </div>
                        <div class="bg-white rounded-lg p-4 border-l-4 border-blue-500">
                            <p class="text-sm text-gray-600">已確認金額</p>
                            <p class="text-2xl font-bold text-gray-800 mt-1">$125,600</p>
                        </div>
                        <div class="bg-white rounded-lg p-4 border-l-4 border-yellow-500">
                            <p class="text-sm text-gray-600">待確認金額</p>
                            <p class="text-2xl font-bold text-gray-800 mt-1">$48,500</p>
                        </div>
                        <div class="bg-white rounded-lg p-4 border-l-4 border-purple-500">
                            <p class="text-sm text-gray-600">已付款金額</p>
                            <p class="text-2xl font-bold text-gray-800 mt-1">$12,300</p>
                        </div>
                    </div>
                    
                    <!-- 薪資列表 -->
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-4 border-b">
                            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-2 sm:space-y-0">
                                <div class="flex space-x-3">
                                    <select class="px-4 py-2 border rounded-lg">
                                        <option>2025年1月</option>
                                        <option>2024年12月</option>
                                    </select>
                                    <select class="px-4 py-2 border rounded-lg">
                                        <option>全部狀態</option>
                                        <option>待工讀生確認</option>
                                        <option>待管理員確認</option>
                                        <option>已確認</option>
                                        <option>已付款</option>
                                    </select>
                                </div>
                                <button onclick="batchPayment()" class="text-purple-600 hover:text-purple-800">
                                    <i class="fas fa-credit-card mr-2"></i>批次付款
                                </button>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left">
                                            <input type="checkbox" class="rounded">
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">工讀生</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">期間</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">工時</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">應付金額</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">狀態</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">操作</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4">
                                            <input type="checkbox" class="rounded">
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center mr-3">
                                                    <span class="text-white font-semibold">王</span>
                                                </div>
                                                <div>
                                                    <div class="font-medium text-gray-900">王小明</div>
                                                    <div class="text-sm text-gray-500">ID: W001</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900">2025/01/01 - 01/15</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm font-medium text-gray-900">32 小時</div>
                                            <div class="text-xs text-gray-500">4 場活動</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-lg font-bold text-green-600">$6,400</div>
                                            <div class="text-xs text-gray-500">$200/時</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-3 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800">
                                                待工讀生確認
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <button onclick="showSalaryDetail()" class="text-purple-600 hover:text-purple-900 mr-3">明細</button>
                                            <button onclick="confirmSalary()" class="text-green-600 hover:text-green-900">確認</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 工讀生管理頁面 -->
            <div id="workersTab" class="admin-content hidden p-6">
                <div class="max-w-7xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-3xl font-bold text-gray-800">工讀生管理</h2>
                            <p class="text-gray-600 mt-1">管理所有工讀生資料與狀態</p>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="importWorkers()" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50">
                                <i class="fas fa-upload mr-2"></i>批次匯入
                            </button>
                            <button onclick="showAddWorker()" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-2 rounded-lg hover:shadow-lg">
                                <i class="fas fa-user-plus mr-2"></i>新增工讀生
                            </button>
                        </div>
                    </div>
                    
                    <!-- 統計摘要 -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg p-4">
                            <p class="text-purple-100">總人數</p>
                            <p class="text-3xl font-bold mt-2">248</p>
                        </div>
                        <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-4">
                            <p class="text-green-100">活躍中</p>
                            <p class="text-3xl font-bold mt-2">186</p>
                        </div>
                        <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-4">
                            <p class="text-blue-100">本月新增</p>
                            <p class="text-3xl font-bold mt-2">28</p>
                        </div>
                        <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg p-4">
                            <p class="text-orange-100">平均評分</p>
                            <p class="text-3xl font-bold mt-2">4.8</p>
                        </div>
                    </div>
                    
                    <!-- 工讀生卡片列表 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        <div class="bg-white rounded-xl p-6 card-hover cursor-pointer" onclick="showWorkerProfile()">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-16 h-16 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center">
                                    <span class="text-white font-bold text-xl">王</span>
                                </div>
                                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs">活躍</span>
                            </div>
                            <h3 class="font-semibold text-gray-800 text-lg">王小明</h3>
                            <p class="text-sm text-gray-500">接待員 • ID: W001</p>
                            <div class="mt-4 space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-500">本月工時</span>
                                    <span class="font-medium">32小時</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-500">參與活動</span>
                                    <span class="font-medium">5場</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-500">評分</span>
                                    <span class="font-medium text-yellow-500">
                                        <i class="fas fa-star"></i> 4.9
                                    </span>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t flex justify-between">
                                <button onclick="event.stopPropagation(); editWorker()" class="text-purple-600 hover:text-purple-800">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="event.stopPropagation(); messageWorker()" class="text-blue-600 hover:text-blue-800">
                                    <i class="fas fa-comment"></i>
                                </button>
                                <button onclick="event.stopPropagation(); viewWorkerSchedule()" class="text-green-600 hover:text-green-800">
                                    <i class="fas fa-calendar"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6 card-hover cursor-pointer">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-16 h-16 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full flex items-center justify-center">
                                    <span class="text-white font-bold text-xl">李</span>
                                </div>
                                <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs">活躍</span>
                            </div>
                            <h3 class="font-semibold text-gray-800 text-lg">李小華</h3>
                            <p class="text-sm text-gray-500">活動助理 • ID: W002</p>
                            <div class="mt-4 space-y-2 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-500">本月工時</span>
                                    <span class="font-medium">28小時</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-500">參與活動</span>
                                    <span class="font-medium">4場</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-500">評分</span>
                                    <span class="font-medium text-yellow-500">
                                        <i class="fas fa-star"></i> 4.8
                                    </span>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t flex justify-between">
                                <button onclick="event.stopPropagation(); editWorker()" class="text-purple-600 hover:text-purple-800">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="event.stopPropagation(); messageWorker()" class="text-blue-600 hover:text-blue-800">
                                    <i class="fas fa-comment"></i>
                                </button>
                                <button onclick="event.stopPropagation(); viewWorkerSchedule()" class="text-green-600 hover:text-green-800">
                                    <i class="fas fa-calendar"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 數據分析頁面 -->
            <div id="analyticsTab" class="admin-content hidden p-6">
                <div class="max-w-7xl mx-auto">
                    <div class="mb-6">
                        <h2 class="text-3xl font-bold text-gray-800">數據分析</h2>
                        <p class="text-gray-600 mt-1">深入分析營運數據與趨勢</p>
                    </div>
                    
                    <!-- KPI 指標 -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="bg-white rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-600">月度收益成長</h3>
                                <span class="text-green-600 text-sm">
                                    <i class="fas fa-arrow-up"></i> 23%
                                </span>
                            </div>
                            <canvas id="revenueChart"></canvas>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-600">工讀生使用率</h3>
                                <span class="text-blue-600 text-sm">85%</span>
                            </div>
                            <canvas id="utilizationChart"></canvas>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-600">客戶滿意度</h3>
                                <span class="text-yellow-600 text-sm">4.8/5.0</span>
                            </div>
                            <canvas id="satisfactionChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- 詳細報表 -->
                    <div class="bg-white rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">營運報表</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">月份</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">活動數</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">總工時</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">薪資支出</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">效率指標</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap">2025年1月</td>
                                        <td class="px-6 py-4 whitespace-nowrap">12</td>
                                        <td class="px-6 py-4 whitespace-nowrap">1,250</td>
                                        <td class="px-6 py-4 whitespace-nowrap">$250,000</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="text-green-600">95%</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 工讀生視圖 -->
        <div id="workerView" class="hidden">
            <!-- 導航列 -->
            <nav class="bg-white shadow-sm border-b sticky top-0 z-40">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between h-16">
                        <div class="flex items-center">
                            <div class="flex items-center space-x-8">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-user text-white"></i>
                                    </div>
                                    <span class="ml-3 text-xl font-bold text-gray-800">我的工作台</span>
                                </div>
                                <div class="hidden md:flex space-x-1">
                                    <button onclick="setWorkerTab('dashboard')" class="worker-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50 tab-active">
                                        <i class="fas fa-home mr-2"></i>總覽
                                    </button>
                                    <button onclick="setWorkerTab('checkin')" class="worker-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-fingerprint mr-2"></i>簽到簽退
                                    </button>
                                    <button onclick="setWorkerTab('schedule')" class="worker-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-calendar-check mr-2"></i>我的班表
                                    </button>
                                    <button onclick="setWorkerTab('salary')" class="worker-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-money-check-alt mr-2"></i>薪資明細
                                    </button>
                                    <button onclick="setWorkerTab('profile')" class="worker-tab px-4 py-2 text-gray-700 hover:text-purple-600 font-medium rounded-lg hover:bg-purple-50">
                                        <i class="fas fa-user-cog mr-2"></i>個人資料
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button onclick="toggleWorkerNotifications()" class="text-gray-600 hover:text-purple-600">
                                <i class="fas fa-bell"></i>
                                <span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                            </button>
                            <button onclick="logout()" class="text-gray-500 hover:text-gray-700">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- 工讀生總覽 -->
            <div id="workerDashboard" class="worker-content p-6">
                <div class="max-w-6xl mx-auto">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-gray-800">嗨，王小明！</h1>
                        <p class="text-gray-600 mt-1">歡迎回來，以下是您的工作概況</p>
                    </div>
                    
                    <!-- 統計卡片 -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-clock text-purple-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-2xl font-bold text-gray-800">32 小時</p>
                            <p class="text-sm text-gray-500 mt-1">本月總工時</p>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-2xl font-bold text-gray-800">$6,400</p>
                            <p class="text-sm text-gray-500 mt-1">預計薪資</p>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-calendar text-blue-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-2xl font-bold text-gray-800">5 場</p>
                            <p class="text-sm text-gray-500 mt-1">本月活動</p>
                        </div>
                        
                        <div class="bg-white rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-star text-yellow-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-2xl font-bold text-gray-800">4.9</p>
                            <p class="text-sm text-gray-500 mt-1">評分</p>
                        </div>
                    </div>
                    
                    <!-- 今日活動 -->
                    <div class="bg-white rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">今日活動</h3>
                        <div class="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-6">
                            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0">
                                <div>
                                    <h4 class="font-semibold text-gray-800 text-xl">2025 科技論壇</h4>
                                    <p class="text-gray-600 mt-2">
                                        <i class="fas fa-map-marker-alt mr-2"></i>台北國際會議中心 3樓
                                    </p>
                                    <div class="mt-3 space-y-1">
                                        <p class="text-sm text-gray-600">
                                            <i class="fas fa-clock mr-2"></i>工作時間：09:00 - 18:00
                                        </p>
                                        <p class="text-sm text-gray-600">
                                            <i class="fas fa-user-tag mr-2"></i>職務：接待員
                                        </p>
                                        <p class="text-sm text-gray-600">
                                            <i class="fas fa-dollar-sign mr-2"></i>時薪：$200
                                        </p>
                                    </div>
                                </div>
                                <button onclick="setWorkerTab('checkin')" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-8 py-3 rounded-lg hover:shadow-lg transform hover:scale-105">
                                    <i class="fas fa-fingerprint mr-2"></i>前往簽到
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 近期活動 -->
                    <div class="bg-white rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">近期活動</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50">
                                <div>
                                    <p class="font-medium text-gray-800">品牌發表會</p>
                                    <p class="text-sm text-gray-500">2025/01/18 • 14:00-20:00</p>
                                </div>
                                <span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-xs">待命</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 簽到簽退頁面 -->
            <div id="workerCheckin" class="worker-content hidden p-6">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">簽到簽退</h2>
                    
                    <div class="bg-white rounded-xl p-6 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">選擇打卡方式</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button onclick="showQRScanner()" class="p-6 border-2 border-purple-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition group">
                                <i class="fas fa-qrcode text-purple-600 text-4xl mb-3 group-hover:scale-110 transition"></i>
                                <p class="font-semibold text-gray-800">QR Code 掃描</p>
                                <p class="text-sm text-gray-500 mt-1">掃描活動QR Code</p>
                            </button>
                            
                            <button onclick="checkInGPS()" class="p-6 border-2 border-blue-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition group">
                                <i class="fas fa-map-marker-alt text-blue-600 text-4xl mb-3 group-hover:scale-110 transition"></i>
                                <p class="font-semibold text-gray-800">GPS 定位</p>
                                <p class="text-sm text-gray-500 mt-1">確認位置打卡</p>
                            </button>
                            
                            <button onclick="checkInFace()" class="p-6 border-2 border-green-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition group">
                                <i class="fas fa-camera text-green-600 text-4xl mb-3 group-hover:scale-110 transition"></i>
                                <p class="font-semibold text-gray-800">人臉辨識</p>
                                <p class="text-sm text-gray-500 mt-1">拍照驗證身份</p>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 今日打卡記錄 -->
                    <div class="bg-white rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">今日打卡記錄</h3>
                        <div id="myCheckInList" class="space-y-3">
                            <!-- 動態載入打卡記錄 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 其他工讀生頁面內容... -->
        </div>

        <!-- 彈出視窗們 -->
        <!-- QR Code 掃描器 -->
        <div id="qrScannerModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-2xl p-8 max-w-md w-full animate-in">
                <h3 class="text-xl font-bold text-gray-800 mb-4">掃描 QR Code</h3>
                <div class="relative bg-gray-900 rounded-lg h-64 flex items-center justify-center mb-4">
                    <div class="text-center text-white">
                        <i class="fas fa-camera text-4xl mb-2"></i>
                        <p>請將 QR Code 對準鏡頭</p>
                        <div class="qr-scan-line"></div>
                    </div>
                </div>
                <button onclick="simulateQRScan()" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 mb-2">
                    模擬掃描成功
                </button>
                <button onclick="closeModal('qrScannerModal')" class="w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200">
                    取消
                </button>
            </div>
        </div>

        <!-- 成功提示 -->
        <div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-2xl p-8 max-w-sm w-full animate-in text-center">
                <svg class="success-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="success-checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="success-checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
                <h3 class="text-xl font-bold text-gray-800 mt-4">操作成功！</h3>
                <p id="successMessage" class="text-gray-600 mt-2">操作已完成</p>
                <button onclick="closeModal('successModal')" class="mt-4 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
                    確定
                </button>
            </div>
        </div>

        <!-- 建立活動彈窗 -->
        <div id="createEventModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-2xl p-8 max-w-2xl w-full animate-in max-h-[90vh] overflow-y-auto">
                <h3 class="text-2xl font-bold text-gray-800 mb-6">建立新活動</h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">活動名稱</label>
                        <input type="text" placeholder="例：2025春季產品發表會" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">活動日期</label>
                            <input type="date" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">活動時間</label>
                            <input type="time" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">活動地點</label>
                        <input type="text" placeholder="例：台北信義區" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">所需人數</label>
                        <input type="number" placeholder="50" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">工種需求</label>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="flex items-center p-2 border rounded">
                                <input type="checkbox" class="mr-2">
                                <span>接待員</span>
                            </label>
                            <label class="flex items-center p-2 border rounded">
                                <input type="checkbox" class="mr-2">
                                <span>活動助理</span>
                            </label>
                            <label class="flex items-center p-2 border rounded">
                                <input type="checkbox" class="mr-2">
                                <span>攝影助理</span>
                            </label>
                            <label class="flex items-center p-2 border rounded">
                                <input type="checkbox" class="mr-2">
                                <span>場地支援</span>
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">活動說明</label>
                        <textarea rows="3" placeholder="請輸入活動詳細說明..." class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:border-purple-500"></textarea>
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-6">
                    <button onclick="closeModal('createEventModal')" class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200">
                        取消
                    </button>
                    <button onclick="saveEvent()" class="flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg hover:shadow-lg">
                        建立活動
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 全域變數
        let currentUser = null;
        let qrTimer = null;
        let qrCountdown = 30;
        
        // 初始化
        window.onload = function() {
            setTimeout(() => {
                document.getElementById('loadingScreen').style.display = 'none';
                document.getElementById('loginPage').classList.remove('hidden');
            }, 1000);
            
            // 初始化圖表
            initCharts();
        }
        
        // 登入功能
        function performLogin() {
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;
            
            if (!email || !password) {
                showNotification('請輸入帳號密碼', 'error');
                return;
            }
            
            // 模擬登入過程
            showLoadingButton('登入中...');
            setTimeout(() => {
                showDashboard();
            }, 1000);
        }
        
        function quickLogin(type) {
            showLoadingButton('登入中...');
            setTimeout(() => {
                if (type === 'admin') {
                    showDashboard();
                } else {
                    showWorkerView();
                }
            }, 500);
        }
        
        function showLoadingButton(text) {
            // 實作載入動畫
        }
        
        // 頁面切換
        function showDashboard() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('workerView').classList.add('hidden');
            document.getElementById('adminDashboard').classList.remove('hidden');
            setAdminTab('overview');
            startCounters();
            startQRTimer();
        }
        
        function showWorkerView() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('adminDashboard').classList.add('hidden');
            document.getElementById('workerView').classList.remove('hidden');
            setWorkerTab('dashboard');
        }
        
        function logout() {
            if (confirm('確定要登出嗎？')) {
                document.getElementById('adminDashboard').classList.add('hidden');
                document.getElementById('workerView').classList.add('hidden');
                document.getElementById('loginPage').classList.remove('hidden');
                clearInterval(qrTimer);
            }
        }
        
        // 管理員分頁切換
        function setAdminTab(tab) {
            // 隱藏所有內容
            document.querySelectorAll('.admin-content').forEach(el => {
                el.classList.add('hidden');
            });
            
            // 移除所有標籤的活動狀態
            document.querySelectorAll('.admin-tab').forEach(el => {
                el.classList.remove('tab-active');
            });
            
            // 顯示選定的內容
            document.getElementById(tab + 'Tab').classList.remove('hidden');
            
            // 設置活動標籤
            const buttons = document.querySelectorAll('.admin-tab');
            buttons.forEach(button => {
                if (button.onclick && button.onclick.toString().includes(tab)) {
                    button.classList.add('tab-active');
                }
            });
        }
        
        // 工讀生分頁切換
        function setWorkerTab(tab) {
            const tabMap = {
                'dashboard': 'workerDashboard',
                'checkin': 'workerCheckin',
                'schedule': 'workerSchedule',
                'salary': 'workerSalary',
                'profile': 'workerProfile'
            };
            
            // 隱藏所有內容
            document.querySelectorAll('.worker-content').forEach(el => {
                el.classList.add('hidden');
            });
            
            // 移除所有標籤的活動狀態
            document.querySelectorAll('.worker-tab').forEach(el => {
                el.classList.remove('tab-active');
            });
            
            // 顯示選定的內容
            const contentId = tabMap[tab];
            if (contentId && document.getElementById(contentId)) {
                document.getElementById(contentId).classList.remove('hidden');
            }
            
            // 設置活動標籤
            const buttons = document.querySelectorAll('.worker-tab');
            buttons.forEach(button => {
                if (button.onclick && button.onclick.toString().includes(tab)) {
                    button.classList.add('tab-active');
                }
            });
        }
        
        // 動態計數器
        function startCounters() {
            const counters = document.querySelectorAll('.counter');
            counters.forEach(counter => {
                const target = +counter.getAttribute('data-target');
                const increment = target / 100;
                let current = 0;
                
                const updateCounter = () => {
                    current += increment;
                    if (current < target) {
                        counter.textContent = Math.ceil(current).toLocaleString();
                        setTimeout(updateCounter, 10);
                    } else {
                        counter.textContent = target.toLocaleString();
                    }
                };
                updateCounter();
            });
        }
        
        // QR Code 功能
        function generateQRCode() {
            const qr = qrcode(0, 'M');
            const data = {
                eventId: 'EV2025001',
                timestamp: Date.now(),
                token: Math.random().toString(36).substr(2, 9)
            };
            qr.addData(JSON.stringify(data));
            qr.make();
            
            const qrDisplay = document.getElementById('qrCodeDisplay');
            if (qrDisplay) {
                qrDisplay.innerHTML = qr.createImgTag(5);
            }
        }
        
        function startQRTimer() {
            generateQRCode();
            qrTimer = setInterval(() => {
                qrCountdown--;
                if (qrCountdown <= 0) {
                    qrCountdown = 30;
                    generateQRCode();
                }
                const countdownEl = document.getElementById('qrCountdown');
                if (countdownEl) {
                    countdownEl.textContent = qrCountdown;
                }
            }, 1000);
        }
        
        // 即時簽到記錄
        function addCheckInRecord() {
            const checkInList = document.getElementById('checkInList');
            if (!checkInList) return;
            
            const records = [
                { name: '王小明', type: 'in', method: 'QR Code', time: '09:05:23' },
                { name: '李小華', type: 'out', method: 'GPS 定位', time: '09:03:45' },
                { name: '張大偉', type: 'in', method: '人臉辨識', time: '09:02:10' },
                { name: '陳小美', type: 'in', method: 'QR Code', time: '09:01:30' },
                { name: '林志成', type: 'out', method: 'GPS 定位', time: '08:59:15' }
            ];
            
            checkInList.innerHTML = records.map(record => `
                <div class="flex items-center justify-between p-3 ${record.type === 'in' ? 'bg-green-50' : 'bg-blue-50'} rounded-lg fade-in-up">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 ${record.type === 'in' ? 'bg-green-100' : 'bg-blue-100'} rounded-full flex items-center justify-center">
                            <i class="fas fa-${record.type === 'in' ? 'sign-in-alt' : 'sign-out-alt'} ${record.type === 'in' ? 'text-green-600' : 'text-blue-600'}"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-800">${record.name}</p>
                            <p class="text-sm text-gray-500">${record.type === 'in' ? '簽到' : '簽退'} • ${record.method}</p>
                        </div>
                    </div>
                    <span class="text-sm text-gray-500">${record.time}</span>
                </div>
            `).join('');
        }
        
        // 初始化圖表
        function initCharts() {
            // 週簽到趨勢圖
            const weeklyCtx = document.getElementById('weeklyChart');
            if (weeklyCtx) {
                new Chart(weeklyCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['週一', '週二', '週三', '週四', '週五', '週六', '週日'],
                        datasets: [{
                            label: '簽到人數',
                            data: [65, 78, 90, 81, 86, 55, 40],
                            borderColor: 'rgb(102, 126, 234)',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }
            
            // 打卡方式分析
            const methodCtx = document.getElementById('methodChart');
            if (methodCtx) {
                new Chart(methodCtx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['QR Code', 'GPS 定位', '人臉辨識', '手動打卡'],
                        datasets: [{
                            data: [45, 30, 20, 5],
                            backgroundColor: [
                                'rgba(102, 126, 234, 0.8)',
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(245, 158, 11, 0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            }
        }
        
        // 彈窗控制
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
        
        function showModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
        }
        
        // 功能函數
        function showCreateEvent() {
            showModal('createEventModal');
        }
        
        function saveEvent() {
            closeModal('createEventModal');
            showSuccess('活動建立成功！');
        }
        
        function showSuccess(message) {
            document.getElementById('successMessage').textContent = message;
            showModal('successModal');
            setTimeout(() => {
                closeModal('successModal');
            }, 3000);
        }
        
        function showQRScanner() {
            showModal('qrScannerModal');
        }
        
        function simulateQRScan() {
            closeModal('qrScannerModal');
            showSuccess('打卡成功！');
            
            // 更新打卡記錄
            const myCheckInList = document.getElementById('myCheckInList');
            if (myCheckInList) {
                const now = new Date();
                const timeStr = now.toTimeString().slice(0, 8);
                myCheckInList.innerHTML = `
                    <div class="flex items-center justify-between p-4 bg-green-50 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-sign-in-alt text-green-600"></i>
                            <div>
                                <p class="font-medium text-gray-800">簽到</p>
                                <p class="text-sm text-gray-500">2025 科技論壇</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="font-medium text-gray-800">${timeStr}</p>
                            <p class="text-sm text-gray-500">QR Code</p>
                        </div>
                    </div>
                ` + myCheckInList.innerHTML;
            }
        }
        
        function checkInGPS() {
            showSuccess('GPS定位成功！您已在活動地點範圍內，打卡成功！');
        }
        
        function checkInFace() {
            showSuccess('人臉辨識成功！打卡完成！');
        }
        
        function togglePassword() {
            const passwordInput = document.getElementById('passwordInput');
            const icon = event.currentTarget.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
        
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.classList.toggle('hidden');
        }
        
        function toggleUserMenu() {
            const menu = document.getElementById('userMenu');
            menu.classList.toggle('hidden');
        }
        
        // 其他功能函數
        function exportReport() {
            showSuccess('報表匯出成功！已下載至您的電腦。');
        }
        
        function showAddWorker() {
            showSuccess('新增工讀生功能開發中...');
        }
        
        function calculateSalary() {
            showSuccess('薪資計算完成！');
        }
        
        function exportSalary() {
            showSuccess('薪資報表已匯出！');
        }
        
        function confirmSalary() {
            if (confirm('確認薪資金額無誤？')) {
                showSuccess('薪資確認成功！');
            }
        }
        
        function showEventQR() {
            generateQRCode();
            showModal('qrModal');
        }
        
        function downloadQR() {
            showSuccess('QR Code 已下載！');
        }
        
        function shareQR() {
            showSuccess('分享連結已複製到剪貼板！');
        }
        
        // 定時更新簽到記錄
        setInterval(() => {
            if (document.getElementById('checkInList')) {
                addCheckInRecord();
            }
        }, 10000); // 每10秒更新一次
        
        // 關閉下拉選單（點擊外部）
        document.addEventListener('click', function(event) {
            const notificationDropdown = document.getElementById('notificationDropdown');
            const userMenu = document.getElementById('userMenu');
            
            if (!event.target.closest('.fa-bell') && notificationDropdown) {
                notificationDropdown.classList.add('hidden');
            }
            
            if (!event.target.closest('.bg-purple-100') && userMenu) {
                userMenu.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
